$(".recordHeader").remove();
$(".recordPath").remove();
$(".recordEdit").remove();
$("#viewRecord").append("<%= escape_javascript(render(:partial => 'edit')) %>");
$("#viewRecord").show();
$("class^='count'").each(function() {
 $(this).charCounter();
});

$('#publish_date').each(function() {
 $(this).datepick({onSelect: pickedDate});
});

$('#publish_time').each(function() {
 $(this).timeEntry({ show24Hours: true }).change(function() { 
      if( $("#article_publish_date").val().length == 0 )
      {
        $("#article_publish_date").val('0000-00-00 ' + $('#publish_time').val() + ':00');
      }else{
        $("#article_publish_date").val($("#article_publish_date").val().substring(0,10) + ' ' + $('#publish_time').val() + ':00');
      }
  });
});


//$("#article_text").livequery(function() {
//  				$(this).wysiwyg();
//				$("#article_text").expire();
//		});


$("div[id^='checkbox-'] input").each(function() {
    $(this).change(function() {
      if($(this).attr('checked'))
      {
        $.ajax({
          type: 'GET',
          dataType: 'script',
          url: '/admin/articles/get_subsection/' + $(this).parent().attr('id').split('-')[2] + '/' + $(this).parent().attr('id').split('-')[1],
          error: function(msg) { alert("Chyba v přenosu dat."); },
          success: function(data, status) {          
          }
        });
      }else{
        $("div[id='subsection-"+ $(this).parent().attr('id').split('-')[1]  +"']").remove();
      }  
  });  
});  


$("form[id^='edit_article']").ajaxForm(
  {
    dataType: 'script',
    beforeSend: function(xhr) {xhr.setRequestHeader("Accept", "text/javascript");},
    resetForm: true,
    complete: function(XMLHttpRequest, textStatus) {
       
    }
  }
);

$("#article_content_type_id").change(function() 
{ 

  $.ajax({
    type: 'GET',
    dataType: 'script',
    url: '/admin/articles/get_content_type/' + $("#article_content_type_id :selected").text() + '/'+ $(this).val() + '/'+ <%= @article.id %>,
    error: function(msg) { alert("Chyba v přenosu dat."); },
    success: function(data, status) {          
    }
  });
 
});